<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Peer Puzzle</title>
		<meta name="author" content="Simon Last" />
		<meta name="twitter:card" content="photo">
  	<meta name="twitter:creator" content="@simonlast">
  	<meta name="twitter:title" content="Peer Puzzle">
  	<meta name="twitter:image" content="http://simonlast.org/screens/peerpuzzle1.png">
		<link rel="shortcut icon" href="http://www.gravatar.com/avatar/3b964d84fcfbcdf59089c8bd7309f0b7.ico" />
		<link rel="stylesheet" type="text/css" href="/styles/style-static.css" />
		<script type="text/javascript" src="//use.typekit.net/suk0ird.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	</head>
	<body class="article">

		<div class="background-image">
			<img src="/screens/peerpuzzle1.png" alt="" />
		</div>

		<div class="header">
			<h1>Peer Puzzle</h1>
		</div>

		<div class="content">

				<div class="about-text">
					<p>Peer Puzzle is an experiment in realtime collaboration using mobile devices.</p>

<p>A common focus in modern technologies is their ability to enable people to communicate remotely. However, these same technologies <em>could</em> be used for the exact opposite.
The goal of this experiment is to use mobile devices to set up an limited medium for communication, and use it as scaffolding for people to use traditional means of communicaton to solve a shared problem.</p>

<p>Peer Puzzle is intended for mobile devices, but works on any device with an accelerometer.</p>
				</div>

				<div class="links">
					
						<a href="http://peerpuzzle.simonlast.org">Launch</a>
					
						<a href="http://github.com/simonlast/peer-puzzle">Source</a>
					
				</div>
			</div>

		</div>

		<script type="text/javascript">

			var backgroundImage = document.querySelector(".background-image img");

			var loadBackground = function(){

				var canvas = document.createElement("canvas");
				canvas.width = backgroundImage.width;
				canvas.height = backgroundImage.height;

				var ctx = canvas.getContext("2d");
				ctx.drawImage(backgroundImage, 0, 0, backgroundImage.width, backgroundImage.height);
				// var color = getVerticalLineAverage(ctx, 0, backgroundImage.height);
				var color = getPixel(ctx, 0, 0);
				var imageContainer = document.querySelector(".background-image")

				var cssColor = "rgba(" + color[0] + "," + color[1] + "," + color[2] + "," + color[3] + ")";

				console.log("cssColor: ", cssColor);

				imageContainer.style["background-color"] = cssColor

			};

			getVerticalLineAverage = function(ctx, x, height){
				var average = [0, 0, 0, 0];

				for(var y=0; y<height; y++){
					var pixel = getPixel(ctx, x, y);

					for (var i = pixel.length - 1; i >= 0; i--) {
						average[i] += pixel[i];
					};
				};

				for (var i = average.length - 1; i >= 0; i--) {
					average[i] /= height;
					average[i] = Math.floor(average[i]);
				};

				return average;
			};

			getPixel = function(ctx, x, y){
				return ctx.getImageData(x, y, 1, 1).data;
			};

			backgroundImage.addEventListener("load", loadBackground);
			if(backgroundImage.complete){
				loadBackground();
			}

		</script>

	</body>
</html>
